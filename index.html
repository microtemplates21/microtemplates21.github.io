<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="MicroTemplates provides a wide range of customizable design solutions including logos, web templates, and social media graphics. Perfect for businesses and individuals seeking professional, creative, and affordable designs.">
    <meta name="keywords"
        content="MicroTemplates, customizable templates, logo templates, web design templates, social media graphics, business templates, creative templates, professional designs, affordable templates, branding templates">
    <meta name="author" content="Microtasker">
    <title>MicroTemplates - Customizable Design Solutions</title>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="temp.css">
    <link rel="shortcut icon" href="favicon_io/favicon.ico" type="image/x-icon">
    <script src="https://kit.fontawesome.com/97e9dcf34a.js" crossorigin="anonymous"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-823LQE951H"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SLYRFMCVNY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-SLYRFMCVNY');
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Baloo+Bhai+2:wght@400..800&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap');
    </style>

</head>

<body>

    <header>
        <nav class="side-nav" id="sideNav">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li id="expanded" onclick="expanded()">Graphic-Design</li>
                <div id="graphic" class="m-sid2">

                    <li><a href="index.html">Logo Design</a></li>
                    <li><a href="index.html">Banner Design</a></li>
                    <li><a href="index.html">UI/UX Design</a></li>
                    <li><a href="index.html">Bussiness Card</a></li>
                    <li><a href="index.html">Stickers</a></li>
                    <li><a href="index.html">Resume</a></li>
                    <li><a href="index.html">Letterheads</a></li>
                    <li><a href="index.html">EBook Cover</a></li>
                    <li><a href="index.html">Web Banners</a></li>
                    <li><a href="index.html">Labels</a></li>
                    <li><a href="index.html">Social Posts</a></li>
                    <li><a href="index.html">Social Banners and Ads</a></li>
                    <li><a href="index.html">YouTube Thumbnails</a></li>
                    <li><a href="index.html">Channel Art</a></li>

                    <li><a href="index.html"></a>Flyer</li>
                    <li><a href="index.html"></a>Brochure</li>
                    <li><a href="index.html"></a>Others</li>


                </div>
                </div>
                <li><a href="index.html">Icons</a></li>
                <li><a href="index.html">Bundles</a></li>
                <li><a href="index.html">Web-assets</a></li>

            </ul>
        </nav>
        <div onclick="close()" class="overlay" id="overlay"></div>
        <div class="navigator">
            <div class="side1">
                <div class="grid">
                    <button id="menuToggle"><i class="fa-solid fa-bars"></i></button>
                </div>
                <div class="logo">
                    <img src="microtemplates2.svg" alt="">
                </div>
                <div class="nav">
                    <ul>


                        <li><a href="index.html">Home</a></li>

                        <li class="menu-item">
                            <a href="#" class="menu-link">Graphic-Design</a>
                            <div class="dropdown-container">
                                <div class="sid1">
                                    <ul class="dropdown-menu">
                                        <li><a href="index.html">Logo Design</a></li>
                                        <li><a href="index.html">Banner Design</a></li>
                                        <li><a href="index.html">UI/UX Design</a></li>
                                        <li><a href="index.html">Bussiness Card</a></li>
                                        <li><a href="index.html">Stickers</a></li>

                                    </ul>
                                </div>
                                <div class="sid2">
                                    <ul class="dropdown-menu">
                                        <li><a href="index.html">Resume</a></li>
                                        <li><a href="index.html">Letterheads</a></li>
                                        <li><a href="index.html">EBook Cover</a></li>
                                        <li><a href="index.html">Web Banners</a></li>
                                        <li><a href="index.html">Labels</a></li>


                                    </ul>
                                </div>
                                <div class="sid2">
                                    <ul class="dropdown-menu">
                                        <li><a href="index.html">Social Posts</a></li>
                                        <li><a href="index.html">Social Banners and Ads</a></li>
                                        <li><a href="index.html">YouTube Thumbnails</a></li>
                                        <li><a href="index.html">Channel Art</a></li>

                                    </ul>

                                </div>
                                <div class="sid1">
                                    <ul class=" templates/dropdown-menu">
                                        <li><a href="index.html"></a>Flyer</li>
                                        <li><a href="index.html"></a>Brochure</li>
                                        <li><a href="index.html"></a>Others</li>
                                    </ul>

                                </div>
                        </li>
                        <li><a href="index.html">Icons</a></li>
                        <li><a href="index.html">Bundles</a></li>
                        <li><a href="index.html">Web-assets</a></li>
                    </ul>
                </div>
            </div>
            <div class="custom">
                <ul>
                    <li><a href="https://microtasker.github.io"><button class="service" style="padding: 10px;">Get
                                Custom Service</button></a></li>

                </ul>
            </div>
        </div>

    </header>
    <div class="home">

        <div style="display: none;" class="search">
            <input type="text" id="searchBar" placeholder="Search Template">
            <div class="searchbutton">
                <button onclick="searchImages()"><i class="fa-solid fa-magnifying-glass"></i> <span
                        class="m-search">Search</span></button>
            </div>
        </div>
        <div class="ad">
            <!-- Advertisement section remains unchanged -->
        </div>

        <main>
            <div id="template-list" class="content">

                <!-- The template list will be dynamically populated -->

                <!-- Load More button -->
                <div style="display: none;" id="load-more-container" class="load-more-container">
                    <button class="load" id="load-more" onclick="loadMoreTemplates()">Load More</button>
                </div>
            </div>
        </main>
    </div>
    <!-- Button trigger modal -->


    <!-- Modal -->

    <div style="display: none;" id="modal" class="modal">
        <div id="category-specific-content" class="main2">

            <h1 id="modal-title" class="top-title" style="padding: 10px; padding-left: 20px;">Template Title</h1>
            <div class="center">
                <div class="download">
                    <div class="img">
                        <img class="img-fluid" id="modal-image" src="https://i.postimg.cc/gJQXnzpP/NUTRITIONIST.jpg"
                            alt="Template Image">
                    </div>
                    <div class="details">
                        <div class="ad-square">
                            <div class="ad-content">
                                <h4>Advertisement</h4>
                                <p>Your Ad Here</p>
                                <button class="ad-btn">Learn More</button>
                            </div>
                        </div>
                        <div class="d-buttons">
                            <ul>
                                <li>
                                    <a id="psd-link" href="" target="_blank">
                                        <button id="psd-button" style="color: #ffffff;">
                                            <img width="30"
                                                src="https://img.icons8.com/color/48/adobe-photoshop--v1.png"
                                                alt="adobe-photoshop--v1" />
                                            <span>Download in PSD</span>
                                        </button>
                                    </a>
                                </li>
                                <li>
                                    <a id="canva-link" href="" target="_blank">
                                        <button id="canva-button" style="background-color: #00C4B4; color: #ffffff;">
                                            <img width="30" src="https://img.icons8.com/fluency/48/canva.png"
                                                alt="canva" />
                                            <span>Customize in Canva</span>
                                        </button>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <p class="agreement">
                            By using this template, you agree to our
                            <a href="../Terms.html" target="_blank">Terms and Conditions</a> and
                            <a href="../Terms.html" target="_blank">Privacy Policy</a>.
                        </p>
                    </div>
                </div>
            </div>


            <div style="margin-bottom: 150px;" class="others">
                <h2>Related Templates</h2>
                <div class="content">
                    <ul>

                    </ul>
                </div>
            </div>

            <div id="category-specific-content" class="box">
                <div class="dropdown">

                    <button class="dropbtn">Customize</button>
                    <div class="dropup-content">
                        <a href="https://bit.ly/499ibeG" target="_blank"></span><span><img width="30"
                                    src="https://img.icons8.com/ios-glyphs/30/adobe-photoshop.png"
                                    alt="adobe-photoshop" /></span><span>Download In PSD</a>
                        <a href="https://bit.ly/3VcAV7j" target="_blank"><img width="30"
                                src="https://img.icons8.com/ios-filled/50/1A1A1A/canva.png" alt="canva" /><span>Open in
                                Canva</span></a>
                    </div>
                    <p class="agreement">
                        By using this template, you agree to our
                        <a href="microtasker.github.io/Terms.html" target="_blank">Terms and Conditions</a> and
                        <a href="microtasker.github.io/Terms.html" target="_blank">Privacy Policy</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>


    <footer>
        <div class="fsocial">
            <div class="tx7">
                <h4>Get connected with us on social network</h4>
            </div>
            <div class="sociallinks">
                <ul>
                    <li><a target="_blank" href="https://bit.ly/3MyFlBX"><i class="fa-brands fa-facebook-f"></i></a>
                    </li>
                    <li><a target="_blank" href="https://www.instagram.com/microtasker_/e/"><i
                                class="fa-brands fa-instagram"></i></a></li>
                    <li><a target="_blank" href="https://bit.ly/49Tcq4U"><i class="fa-brands fa-pinterest-p"></i></a>
                    </li>
                    <li><a target="_blank" href="https://bit.ly/3NK0UiQ"><i class="fa-brands fa-linkedin"></i></a>
                    </li>
                    <li><a target="_blank" href="https://bit.ly/41mVPS5"><i class="fa-brands fa-youtube"></i></a>
                    </li>
                    <li><a target="_blank" href="https://bit.ly/40YUZM4"><i class="fa-brands fa-twitter"></i></a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="fhead">
            <div class="fmain">
                <div class="name">
                    <div class="logo">
                        <img width="150px" src="whitemicrotemplates.svg" alt="microtasker">
                    </div>
                    <p>
                        Our platform offers a diverse collection of ready-made, fully customizable templates, allowing
                        you to effortlessly find the perfect design to suit your needsâ€”quickly and affordably.
                    </p>
                </div>
                <div class="links">
                    <h3>Usefull links</h3>
                    <ul>
                        <li><a href="Terms.html">Terms&condtions</a></li>
                        <li><a href="">Privacy Policy</a></li>
                        <li><a target="_blank" href="https://microtasker.github.io">Avail Freelance Services</a></li>

                </div>
                <div class="contact">
                    <h3>Contact</h3>
                    <ul>
                        <li><a href="mailto:muhmadmuneeb13@gmail.com"><i class="fa-solid fa-envelope"></i> Click
                                me
                                to send</a></li>
                        <li><a href="https://bit.ly/44ynFwj"><i class="fa-brands fa-whatsapp"> </i>
                                +923234673347</a></li>
                        <li><a href=""><i class="fa-solid fa-phone"></i> +923234673347</a></li>

                    </ul>
                </div>
            </div>
        </div>
        <div class="copyright">
            <p class="credit">&copy; Copyright Microtemplates
             
            </p>


        </div>
    </footer>


    <script src="script.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getFirestore, collection, query, orderBy, limit, startAfter, getDocs, doc, getDoc, where } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDXyQl8pfoSlcAE-1zbyhGMExrbn_eNyPM",
            authDomain: "microtemplates-eb2e7.firebaseapp.com",
            projectId: "microtemplates-eb2e7",
            storageBucket: "microtemplates-eb2e7.appspot.com",
            messagingSenderId: "673841508032",
            appId: "1:673841508032:web:11d735db56be6505254725",
            measurementId: "G-BWQH87DFY0"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        let lastVisible = null;
        const limitCount = 15;
        let currentSearchQuery = ""; // Track the current search query
        // Check the structure of templateData


        // Function to render templates
        function renderTemplates(templateList, templates) {

            templates.forEach(doc => {
                const data = doc.data();
                let categorySpecificContent = '';
                console.log(data);
                // Check the category and customize the content

                if (data.category === "bundels") {

                    categorySpecificContent = `
                <div class="template" data-template-id="${doc.id}">
                    <div class="img-overlay">
                        <img width="400px" src="${data.thumbnail}" alt="${data.name}">
                        <div class="overlay">
                         <button class="show-modal-btn"  style="background-color: #ffcc00; color:black; width: 200px; padding:20px; cursor:pointer;" id="down" data-id="${doc.id}><i class="fa-solid fa-crown"></i> Buy and Customize</button>
                        </div>
                    </div>
                </div>
            `;
                } else if (data.category === "icons") {
                    categorySpecificContent = `
                <div class="template graphics" data-template-id="${doc.id}">
                    <div class="img-overlay">
                        <img width="400px" src="${data.thumbnail}" alt="${data.name}">
                        <div class="overlay">
                            <button class="show-modal-btn" data-id="${doc.id}">Download</button>
                        </div>
                    </div>
                </div>
            `;
                } else if (data.category === "web-assets") {
                    categorySpecificContent = `
                <div class="template video" data-template-id="${doc.id}">
                    <div class="img-overlay">
                        <img width="400px" src="${data.thumbnail}" alt="${data.name}">
                        <div class="overlay">
                            <button class="show-modal-btn" data-id="${doc.id}">Download</button>
                        </div>
                    </div>
                </div>
            `;
                } else {
                    // Default template content
                    categorySpecificContent = `
                <div class="template" data-template-id="${doc.id}">
                    <div class="img-overlay">
                        <img width="400px" src="${data.thumbnail}" alt="${data.name}">
                        <div class="overlay">
                            <button class="show-modal-btn" data-id="${doc.id}">Customize</button>
                        </div>
                    </div>
                </div>
            `;
                }

                const templateElement = document.createElement("div");
                templateElement.innerHTML = categorySpecificContent;
                templateList.appendChild(templateElement);

                // Add event listener for the modal button
                templateElement.querySelector('.show-modal-btn').addEventListener('click', () => {
                    updateURL(doc.id);
                    fetchAndShowTemplate(doc.id);
                });
            });

        }
        // Function to show modal
        // Function to show modal

        function showModal(templateData, templateId) {
            const modal = document.getElementById("modal");
            const title = document.getElementById("modal-title");
            const image = document.getElementById("modal-image");
            const psdLink = document.getElementById("psd-link");
            const canvaLink = document.getElementById("canva-link");
            const categorySpecificContent = document.getElementById("category-specific-content");

            // Update modal title, image, and links
            title.innerText = templateData.name;
            image.src = templateData.thumbnail;
            psdLink.href = templateData.download_link
            canvaLink.href = templateData.canva_template

            // Reset category specific content
            categorySpecificContent.innerHTML = '';

            // Category-specific content
            switch (templateData.category) {
                case "business":
                    categorySpecificContent.innerHTML = `
                <h3>Business Template</h3>
                <p>Customize this template for your business needs!</p>
                <button>Get Started</button>
            `;
                    break;

                case "icons":
                    categorySpecificContent.innerHTML = `
                <h1 class="top-title" style="padding: 10px; padding-left: 20px;">${templateData.name}</h1>
                <div class="center">
                    <div class="download">
                        <div class="img">
                            <img class="img-fluid" src="${templateData.thumbnail}" alt="${templateData.name}">
                        </div>
                        <div class="details">
                            <div class="ad-square">
                                <div class="ad-content">
                                    <h4>Advertisement</h4>
                                    <p>Your Ad Here</p>
                                    <button class="ad-btn">Learn More</button>
                                </div>
                            </div>
                            <div style="text-align: center;" class="files-type">
                                <p style="font-size: 15px;">File types: SVG, PNG, JPG</p>
                            </div>
                            <div class="d-buttons">
                                <ul>
                                    <li>
                                        <a href="${templateData.download_link}">
                                            <button id="down">Download in All Formats</button>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <p class="agreement">
                                By using this template, you agree to our 
                                <a href="privacypolicy.html" target="_blank">Terms and Conditions</a> and 
                                <a href="privacypolicy.html" target="_blank">Privacy Policy</a>.
                            </p>
                        </div>
                    </div>
                </div>
                    <div style="margin-bottom: 150px;" class="others">
            <h2>Related Templates</h2>
            <div class="content">
            <ul id="relate">
               
            </ul>
            </div>
            </div>
            
                        <div id="category-specific-content" class="box">
                  
                           

               <a href="${templateData.download_link}">
                                            <button colur:white style="  color:white; background-color:#007BFF; width: 300px; cursor:pointer; border:none; padding:10px; border-radius:5px; id="down">Download in All Formats</button>
                                        </a>
                                        <p class="agreement">
                                          By using this template, you agree to our 
                                          <a href="privacypolicy.html" target="_blank">Terms and Conditions</a> and 
                                          <a href="privacypolicy.html" target="_blank">Privacy Policy</a>.
                                       </p>
                                       </div>
            </div>
                </div>
                </div>
            `;
                    break;

                case "web-assets":
                    categorySpecificContent.innerHTML = `
                <h1 class="top-title" style="padding: 10px; padding-left: 20px;">${templateData.name}</h1>
                <div class="center">
                    <div class="download">
                        <div class="img">
                            <img class="img-fluid" src="${templateData.thumbnail}" alt="${templateData.name}">
                        </div>
                        <div class="details">
                            <div class="ad-square">
                                <div class="ad-content">
                                    <h4>Advertisement</h4>
                                    <p>Your Ad Here</p>
                                    <button class="ad-btn">Learn More</button>
                                </div>
                            </div>
                            
                            <div class="d-buttons">
                                <ul>
                                    <li>
                                        <a href="${templateData.download_link}">
                                            <button style="width:300px"; id="down">Free Download</button>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <p class="agreement">
                                By using this template, you agree to our 
                                <a href="privacypolicy.html" target="_blank">Terms and Conditions</a> and 
                                <a href="privacypolicy.html" target="_blank">Privacy Policy</a>.
                            </p>
                        </div>
                    </div>
                </div>
                 <div style="margin-bottom: 150px;" class="others">
            <h2>Related Templates</h2>
            <div class="content">
            <ul id="relate">
               
            </ul>
            </div>
            </div>
            
                        <div id="category-specific-content" class="box">
                  
                           

               <a href="${templateData.download_link}">
                                            <button  style=" color:white; background-color:#007BFF; width: 300px; cursor:pointer; border:none; padding:10px; border-radius:5px; id="down">Free Download</button>
                                        </a>
                                        <p class="agreement">
                                          By using this template, you agree to our 
                                          <a href="privacypolicy.html" target="_blank">Terms and Conditions</a> and 
                                          <a href="privacypolicy.html" target="_blank">Privacy Policy</a>.
                                       </p>
                                       </div>
            </div>
                </div>
                </div>
            `;
                    break;

                case "bundels":
                    categorySpecificContent.innerHTML = `
                <h1 class="top-title" style="padding: 10px; padding-left: 20px;">${templateData.name}</h1>
                <div class="center">
                    <div class="download">
                        <div class="img">
                            <img class="img-fluid" src="${templateData.thumbnail}" alt="${templateData.name}">
                        </div>
                        <div class="details">
                            <div class="ad-square">
                                <div class="ad-content">
                                    <h4>Advertisement</h4>
                                    <p>Your Ad Here</p>
                                    <button class="ad-btn">Learn More</button>
                                </div>
                            </div>
                            <div class="d-buttons">
                                <ul>
                                    <li>
                                        <a href="${templateData.download_link}">
                                            <button style="background-color: #ffcc00; color: black; width: 300px;">
                                                <i class="fa-solid fa-crown"></i> Buy and Customize
                                            </button>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <p class="agreement">
                                By using this template, you agree to our 
                                <a href="privacypolicy.html" target="_blank">Terms and Conditions</a> and 
                                <a href="privacypolicy.html" target="_blank">Privacy Policy</a>.
                            </p>
                        </div>
                    </div>
                </div>
                
      
        <div style="margin-bottom: 150px;" class="others">
            <h2>Related Templates</h2>
            <div class="content">
            <ul id="relate">
               
            </ul>
            </div>
            </div>
            
                        <div id="category-specific-content" class="box">
                  
                           

                 <a href="${templateData.download_link}">
                                            <button style="background-color: #ffcc00; color: black; width: 300px; cursor:pointer; border:none; padding:10px; border-radius:5px;">
                                                <i class="fa-solid fa-crown"></i> Buy and Customize
                                            </button>
                                        </a>
              
                                        <p class="agreement">
                                          By using this template, you agree to our 
                                          <a href="privacypolicy.html" target="_blank">Terms and Conditions</a> and 
                                          <a href="privacypolicy.html" target="_blank">Privacy Policy</a>.
                                       </p>
                                       </div>
            </div>
                </div>
                </div>`
                        ;
                    break;

                case "logo":
                    categorySpecificContent.innerHTML = `
                <h1 class="top-title" style="padding: 10px; padding-left: 20px;">${templateData.name}</h1>
                <div class="center">
                    <div class="download">
                        <div class="img">
                            <img class="img-fluid" src="${templateData.thumbnail}" alt="${templateData.name}">
                        </div>
                        <div class="details">
                            <div class="ad-square">
                                <div class="ad-content">
                                    <h4>Advertisement</h4>
                                    <p>Your Ad Here</p>
                                    <button class="ad-btn">Learn More</button>
                                </div>
                            </div>
                            <div class="d-buttons">
                                <ul>
                                    <li>
                                        <a href="${templateData.download_link}">
                                            <button id="psd-button" style="background-color: #FF9A00; color: #ffffff;">
                                                <img width="30" src="https://img.icons8.com/color/48/adobe-illustrator--v1.png" alt="adobe-illustrator--v1"/> 
                                                <span>Download in AI</span>
                                            </button> 
                                        </a>
                                    </li>
                                    <li>
                                        <a href="${templateData.canva_template}">
                                            <button id="canva-button" style="background-color: #00C4B4; color: #ffffff;">
                                                <img width="30" src="https://img.icons8.com/fluency/48/canva.png" alt="canva"/> 
                                                <span> Customize in Canva</span>
                                            </button>
                                        </a>
                                    </li>
                                </ul>
                                <p class="agreement">
                                    By using this template, you agree to our 
                                    <a href="privacypolicy.html" target="_blank">Terms and Conditions</a> and 
                                    <a href="privacypolicy.html" target="_blank">Privacy Policy</a>.
                                </p>
                            </div>
                            </div>
                    </div>
                </div>
                    <div style="margin-bottom: 150px;" class="others">
            <h2>Related Templates</h2>
            <div class="content">
            <ul id="relate">
               
            </ul>
            </div>
            </div>
            
                        <div id="category-specific-content" class="box">
                        <div class="dropdown">
                           
            <button class="dropbtn">Customize</button>
            <div class="dropup-content">
               <a href="${templateData.download_link}" target="_blank"></span><span><img width="30"src="https://img.icons8.com/color/48/adobe-illustrator--v1.png" alt="adobe-photoshop"/></span><span>Download In AI</a>
               <a href="${templateData.canva_template}" target="_blank"><img width="30"  src="https://img.icons8.com/ios-filled/50/1A1A1A/canva.png" alt="canva"/><span>Open in Canva</span></a>
               <p class="agreement">
                 By using this template, you agree to our 
                 <a href="privacypolicy.html" target="_blank">Terms and Conditions</a> and 
                 <a href="privacypolicy.html" target="_blank">Privacy Policy</a>.
              </p>
              </div>
            </div>
                </div>
                </div>
        
    
            `;
                    break;

                default:
                    categorySpecificContent.innerHTML = `
                 
            <h1 class="top-title" style="padding: 10px; padding-left: 20px;" id="modal-title" class="top-title" style="padding: 10px; padding-left: 20px;">${templateData.name}</h1>
            <div class="center">
                <div class="download">
                    <div class="img">
                        <img class="img-fluid" id="modal-image"  src="${templateData.thumbnail}" alt="${templateData.name}">
                    </div>
                    <div class="details">
                        <div class="ad-square">
                            <div class="ad-content">
                                <h4>Advertisement</h4>
                                <p>Your Ad Here</p>
                                <button class="ad-btn">Learn More</button>
                            </div>
                        </div>
                        <div class="d-buttons">
                            <ul>
                                <li>
                                    <a id="psd-link" href="${templateData.download_link}" target="_blank">
                                        <button id="psd-button" style="color: #ffffff;">
                                            <img width="30" src="https://img.icons8.com/color/48/adobe-photoshop--v1.png" alt="adobe-photoshop--v1"/>
                                            <span>Download in PSD</span>
                                        </button>
                                    </a>
                                </li>
                                <li>
                                    <a href="${templateData.canva_template}" target="_blank">
                                        <button id="canva-button" style="background-color: #00C4B4; color: #ffffff;">
                                            <img width="30" src="https://img.icons8.com/fluency/48/canva.png" alt="canva"/>
                                            <span>Customize in Canva</span>
                                        </button>
                                    </a>
                                </li>
                            </ul>
                        </div>
                      <p class="agreement">
               By using this template, you agree to our 
               <a href="privacypolicy.html" target="_blank">Terms and Conditions</a> and 
               <a href="privacypolicy.html" target="_blank">Privacy Policy</a>.
            </p>
                    </div>
                </div>
            </div>
       
      
        <div style="margin-bottom: 150px;" class="others">
            <h2>Related Templates</h2>
            <div class="content">
            <ul id="relate">
               
            </ul>
            </div>
            </div>
            
                        <div id="category-specific-content" class="box">
                        <div class="dropdown">
                           
            <button class="dropbtn">Customize</button>
            <div class="dropup-content">
               <a href="${templateData.download_link}" target="_blank"></span><span><img width="30"src="https://img.icons8.com/ios-glyphs/30/adobe-photoshop.png" alt="adobe-photoshop"/></span><span>Download In PSD</a>
               <a href="${templateData.canva_template}" target="_blank"><img width="30"  src="https://img.icons8.com/ios-filled/50/1A1A1A/canva.png" alt="canva"/><span>Open in Canva</span></a>
            </div>
             <p class="agreement">
               By using this template, you agree to our 
               <a href="privacypolicy.html" target="_blank">Terms and Conditions</a> and 
               <a href="privacypolicy.html" target="_blank">Privacy Policy</a>.
            </p>
            </div>
                </div>
                </div>`
                        ;


            }

        }
        // Close modal and clear URL
        window.onclick = function (event) {
            const modalOverlay = document.getElementById("modal-overlay");
            if (event.target === modalOverlay) {
                modalOverlay.style.display = "none";
                clearURL();
            }
        };

        // Update the URL with template ID and reload the page
        function updateURL(templateId) {
            const newURL = `${window.location.pathname}?templateId=${templateId}`;
            window.location.href = newURL; // Reload the page with the new URL

        }

        // Fetch a single template by ID and show it in the modal
        async function fetchAndShowTemplate(templateId) {
            try {
                const docRef = doc(db, "microtemplates", templateId);
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const data = docSnap.data();
                    showModal(data, templateId);
                } else {
                    console.error("Template not found!");
                }
            } catch (error) {
                console.error("Error fetching template:", error);
            }
        }


        // Fetch templates (with optional search and pagination)
        async function fetchTemplates(searchQuery = "", loadMore = false) {
            const templateList = document.getElementById('template-list');
            if (!templateList) {
                console.error("Error: template-list element not found.");
                return;
            }

            let templatesRef = collection(db, "microtemplates");
            let templatesQuery;

            if (searchQuery) {
                const lowerCaseSearchQuery = searchQuery.trim().toLowerCase();

                templatesQuery = query(
                    templatesRef,
                    where("name", ">=", lowerCaseSearchQuery),
                    where("name", "<=", lowerCaseSearchQuery + "\uf8ff"),
                    orderBy("name"),
                    limit(limitCount)
                );

                if (loadMore && lastVisible) {
                    templatesQuery = query(
                        templatesRef,
                        where("name", ">=", lowerCaseSearchQuery),
                        where("name", "<=", lowerCaseSearchQuery + "\uf8ff"),
                        orderBy("name"),
                        startAfter(lastVisible),
                        limit(limitCount)
                    );
                }
            } else {
                templatesQuery = query(
                    templatesRef,
                    orderBy("uploaded_at", "desc"),
                    limit(limitCount)
                );

                if (loadMore && lastVisible) {
                    templatesQuery = query(
                        templatesRef,
                        orderBy("uploaded_at", "desc"),
                        startAfter(lastVisible),
                        limit(limitCount)
                    );
                }
            }

            try {
                const snapshot = await getDocs(templatesQuery);
                if (!loadMore) templateList.innerHTML = ""; // Clear list for new results

                if (snapshot.empty && !loadMore) {
                    templateList.innerHTML = "<p>No templates found.</p>";
                    return;
                }

                lastVisible = snapshot.docs[snapshot.docs.length - 1];
                renderTemplates(templateList, snapshot.docs);
            } catch (error) {
                console.error("Error fetching data from Firestore:", error);
            }
        }

        // Handle URL on page load
        async function handleURL() {
            const params = new URLSearchParams(window.location.search);
            const templateId = params.get("templateId");

            if (templateId) {
                await fetchAndShowTemplate(templateId); // Fetch and show the modal
                document.getElementById("modal").style.display = "block"; // Ensure modal is visible
            } else {
                await fetchTemplates(); // Load default templates
            }
        }

        // Initial load
        window.onload = handleURL;

        // Attach search functionality
        document.getElementById("searchBar").addEventListener("input", async () => {
            currentSearchQuery = document.getElementById("searchBar").value.trim().toLowerCase();
            lastVisible = null;
            await fetchTemplates(currentSearchQuery);
        });

        // Attach load more functionality
        const loadMoreButton = document.getElementById("loadMoreButton");
        if (loadMoreButton) {
            loadMoreButton.addEventListener("click", async () => {
                await fetchTemplates(currentSearchQuery, true);
            });
        }
    </script>



</body>

</html>
